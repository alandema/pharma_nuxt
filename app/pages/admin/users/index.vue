<script setup lang="ts">

const {data: users}  = await useFetch('/api/users/admin',
    {
        method: 'GET',
    }
)

</script>

<template>
  <div class="page-header">
    <h1>ğŸ‘¤ UsuÃ¡rios</h1>
    <button class="btn-primary" @click="navigateTo('/admin/users/register')">+ Novo UsuÃ¡rio</button>
  </div>
  <div class="card">
    <template v-if="users?.length">
      <div class="list-item" v-for="user in users" :key="user.id">
        <NuxtLink :to="`/admin/users/${user.id}`">{{ user.username }}</NuxtLink>
        <span :class="['badge', user.role === 'admin' ? 'badge-admin' : 'badge-user']">{{ user.role }}</span>
      </div>
    </template>
    <div v-else class="empty">Nenhum usuÃ¡rio cadastrado.</div>
  </div>
</template>